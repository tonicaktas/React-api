{"ast":null,"code":"import _objectSpread from \"/Users/tonicaktas/Desktop/reactMovieApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/Users/tonicaktas/Desktop/reactMovieApp/src/components/Home/Home.js\";\n// import React, {Component} from 'react';\n// import HeroImage from '../elements/HeroImage/HeroImage';\n// import { API_URL, API_KEY, IMAGE_BASE_URL, POSTER_SIZE, BACKDROP_SIZE} from '../../config';\n// import SearchBar from '../elements/SearchBar/SearchBar';\n// import FourColGrid from '../elements/FourColGrid/FourColGrid';\n// import MovieThumb from '../elements/MovieThumb/MovieThumb';\n// import LoadMoreBtn from '../elements/LoadMoreBtn/LoadMoreBtn';\n// import Spinner from '../elements/Spinner/Spinner';\n// import './Home.css';\nimport React, { Component } from 'react';\nimport { API_URL, API_KEY, IMAGE_BASE_URL, POSTER_SIZE, BACKDROP_SIZE } from '../../config';\nimport HeroImage from '../elements/HeroImage/HeroImage';\nimport SearchBar from '../elements/SearchBar/SearchBar';\nimport FourColGrid from '../elements/FourColGrid/FourColGrid';\nimport MovieThumb from '../elements/MovieThumb/MovieThumb';\nimport LoadMoreBtn from '../elements/LoadMoreBtn/LoadMoreBtn';\nimport Spinner from '../elements/Spinner/Spinner';\nimport './Home.css'; // class Home extends Component {\n//     state = {\n//         movies: [],\n//         heroImage: null,\n//         loading: false,\n//         currentPage: 0,\n//         totalPages: 0,\n//         searchTerm: ''\n//     }\n\nclass Home extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      movies: [],\n      heroImage: null,\n      loading: false,\n      currentPage: 0,\n      totalPages: 0,\n      searchTerm: '' // componentDidMount()  {\n      //     this.setState({ loading: true});\n      //     // specifiera url från vart vi hämtar data\n      //     const endpoint = `${API_URL}movie/popular?api_key=${API_KEY}&language=en-US&page=1}`;\n      //     // Hämtar data\n      //     this.fetchItems(endpoint);\n      // }\n\n    };\n\n    this.loadMoreItems = () => {\n      // ES6 Destructuring the state\n      const _this$state = this.state,\n            searchTerm = _this$state.searchTerm,\n            currentPage = _this$state.currentPage;\n      let endpoint = '';\n      this.setState({\n        loading: true\n      });\n\n      if (searchTerm === '') {\n        endpoint = \"\".concat(API_URL, \"movie/popular?api_key=\").concat(API_KEY, \"&language=en-US&page=\").concat(currentPage + 1);\n      } else {\n        endpoint = \"\".concat(API_URL, \"search/movie?api_key=\").concat(API_KEY, \"&language=en-US&query=\").concat(searchTerm, \"&page=\").concat(currentPage + 1);\n      }\n\n      this.fetchItems(endpoint);\n    };\n\n    this.fetchItems = endpoint => {\n      // ES6 Destructuring the state\n      const _this$state2 = this.state,\n            movies = _this$state2.movies,\n            heroImage = _this$state2.heroImage,\n            searchTerm = _this$state2.searchTerm;\n      fetch(endpoint).then(result => result.json()).then(result => {\n        this.setState({\n          movies: [...movies, ...result.results],\n          heroImage: heroImage || result.results[0],\n          loading: false,\n          currentPage: result.page,\n          totalPages: result.total_pages\n        });\n      }).catch(error => console.error('Error:', error));\n    };\n  }\n\n  componentDidMount() {\n    if (sessionStorage.getItem('HomeState')) {\n      let state = JSON.parse(sessionStorage.getItem('HomeState'));\n      this.setState(_objectSpread({}, state));\n    } else {\n      this.setState({\n        loading: true\n      });\n      const endpoint = \"\".concat(API_URL, \"movie/popular?api_key=\").concat(API_KEY, \"&language=en-US&page=1\");\n      this.fetchItems(endpoint);\n    }\n  } // loaMoreItems = () => {\n  //     let endpoint = '';\n  //     this.setState({loading: true});\n  //     //om search fältet är tom visa populära filmer\n  //     if (this.state.searchTerm === ''){\n  //         endpoint = `${API_URL}movie/popular?api_key=${API_KEY}&language=en-US&page=${this.state.currentPage + 1}}`;\n  //     } else {\n  //         endpoint = `${API_URL}search/movie?api_key=${API_KEY}&language=en-US&query${this.state.searchTerm}&page=${this.state.currentPage + 1}`;\n  //     }\n  //     this.fetchItems(endpoint);\n  // }\n\n\n  //class somponent user render -> return method\n  render() {\n    return React.createElement(\"div\", {\n      className: \"rmbd-home\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, React.createElement(HeroImage, {\n      image: \"\".concat(IMAGE_BASE_URL).concat(BACKDROP_SIZE).concat(this.state.heroImage.backdrop_path),\n      title: this.state.heroImage.original_title,\n      text: this.state.heroImage.overview,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }), React.createElement(SearchBar, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    })), React.createElement(FourColGrid, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }), React.createElement(Spinner, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }), React.createElement(LoadMoreBtn, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default Home;","map":{"version":3,"sources":["/Users/tonicaktas/Desktop/reactMovieApp/src/components/Home/Home.js"],"names":["React","Component","API_URL","API_KEY","IMAGE_BASE_URL","POSTER_SIZE","BACKDROP_SIZE","HeroImage","SearchBar","FourColGrid","MovieThumb","LoadMoreBtn","Spinner","Home","state","movies","heroImage","loading","currentPage","totalPages","searchTerm","loadMoreItems","endpoint","setState","fetchItems","fetch","then","result","json","results","page","total_pages","catch","error","console","componentDidMount","sessionStorage","getItem","JSON","parse","render","backdrop_path","original_title","overview"],"mappings":"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","sourcesContent":["// import React, {Component} from 'react';\n// import HeroImage from '../elements/HeroImage/HeroImage';\n// import { API_URL, API_KEY, IMAGE_BASE_URL, POSTER_SIZE, BACKDROP_SIZE} from '../../config';\n// import SearchBar from '../elements/SearchBar/SearchBar';\n// import FourColGrid from '../elements/FourColGrid/FourColGrid';\n// import MovieThumb from '../elements/MovieThumb/MovieThumb';\n// import LoadMoreBtn from '../elements/LoadMoreBtn/LoadMoreBtn';\n// import Spinner from '../elements/Spinner/Spinner';\n\n// import './Home.css';\n\nimport React, { Component } from 'react';\nimport { API_URL, API_KEY, IMAGE_BASE_URL, POSTER_SIZE, BACKDROP_SIZE } from '../../config';\nimport HeroImage from '../elements/HeroImage/HeroImage';\nimport SearchBar from '../elements/SearchBar/SearchBar';\nimport FourColGrid from '../elements/FourColGrid/FourColGrid';\nimport MovieThumb from '../elements/MovieThumb/MovieThumb';\nimport LoadMoreBtn from '../elements/LoadMoreBtn/LoadMoreBtn';\nimport Spinner from '../elements/Spinner/Spinner';\nimport './Home.css';\n\n// class Home extends Component {\n//     state = {\n//         movies: [],\n//         heroImage: null,\n//         loading: false,\n//         currentPage: 0,\n//         totalPages: 0,\n//         searchTerm: ''\n//     }\n\nclass Home extends Component {\n    state = {\n      movies: [],\n      heroImage: null,\n      loading: false,\n      currentPage: 0,\n      totalPages: 0,\n      searchTerm: ''\n    }\n\n\n    // componentDidMount()  {\n    //     this.setState({ loading: true});\n    //     // specifiera url från vart vi hämtar data\n    //     const endpoint = `${API_URL}movie/popular?api_key=${API_KEY}&language=en-US&page=1}`;\n    //     // Hämtar data\n    //     this.fetchItems(endpoint);\n    // }\n    componentDidMount() {\n        if (sessionStorage.getItem('HomeState')) {\n          let state = JSON.parse(sessionStorage.getItem('HomeState'))\n          this.setState({ ...state })\n        } else {\n          this.setState({ loading: true })\n          const endpoint = `${API_URL}movie/popular?api_key=${API_KEY}&language=en-US&page=1`;\n          this.fetchItems(endpoint);\n        }\n      }\n\n\n    // loaMoreItems = () => {\n    //     let endpoint = '';\n    //     this.setState({loading: true});\n\n    //     //om search fältet är tom visa populära filmer\n    //     if (this.state.searchTerm === ''){\n    //         endpoint = `${API_URL}movie/popular?api_key=${API_KEY}&language=en-US&page=${this.state.currentPage + 1}}`;\n    //     } else {\n    //         endpoint = `${API_URL}search/movie?api_key=${API_KEY}&language=en-US&query${this.state.searchTerm}&page=${this.state.currentPage + 1}`;\n    //     }\n    //     this.fetchItems(endpoint);\n    // }\n    loadMoreItems = () => {\n        // ES6 Destructuring the state\n        const { searchTerm, currentPage } = this.state;\n    \n        let endpoint = '';\n        this.setState({ loading: true })\n    \n        if (searchTerm === '') {\n          endpoint = `${API_URL}movie/popular?api_key=${API_KEY}&language=en-US&page=${currentPage + 1}`;\n        } else {\n          endpoint = `${API_URL}search/movie?api_key=${API_KEY}&language=en-US&query=${searchTerm}&page=${currentPage + 1}`;\n        }\n        this.fetchItems(endpoint);\n      }\n\n\n\n\n\n\n    // fetchItems = (endpoint) => {\n    //     //hämtar data med fetch(). fetch returnar 'promise'. Promise är nått som kommer resolvas i framtiden, vi kan vänta att den ska resolvas med then()\n    //     fetch(endpoint)\n    //     //convertera resultat till json \n    //     .then(result => result.json())\n\n    //     .then(result => {\n    //         this.setState({\n    //             //kopiera gamla movies och appendar nya till den \n    //             movies: [ ...this.state.movies, ...result.results ],\n    //             //kolla om HeroImage finns, om inte så lägger vi till första bilden som står i tur\n    //             heroImage: this.state.heroImage || result.results[0],\n    //             loading: false,\n    //             currentPage: result.page,\n    //             totalPages: result.total_pages\n\n    //         })\n    //     })\n    //     .catch(error => console.error('Error:', error))\n    // }\n    fetchItems = (endpoint) => {\n        // ES6 Destructuring the state\n        const { movies, heroImage, searchTerm } = this.state;\n    \n        fetch(endpoint)\n        .then(result => result.json())\n        .then(result => {\n          this.setState({\n            movies: [...movies, ...result.results],\n            heroImage: heroImage || result.results[0],\n            loading: false,\n            currentPage: result.page,\n            totalPages: result.total_pages\n          })\n        })\n        .catch(error => console.error('Error:', error))\n      }\n\n\n\n\n//class somponent user render -> return method\n    render(){\n        return(\n            <div className=\"rmbd-home\">\n                {/* kolla om heroIMage finns, om ja visa denna om inte visa null */}\n                \n                <div>\n                <HeroImage image={`${IMAGE_BASE_URL}${BACKDROP_SIZE}${this.state.heroImage.backdrop_path}`}\n                title={this.state.heroImage.original_title}\n                text={this.state.heroImage.overview}/>\n                <SearchBar />\n                </div> \n                \n                \n                <FourColGrid />\n                <Spinner />\n                <LoadMoreBtn />\n            </div>\n        )\n    }\n}\n\nexport default Home;"]},"metadata":{},"sourceType":"module"}